\section{Prime Ideals as a blend}
\label{sec:prime_ideals}

\subsection*{Introduction}
One of the most fundamental concepts of modern mathematics, which is
the basis of commutative algebra and a seminal ingredient of the
language of schemes in modern algebraic geometry is the one of
\emph{prime ideal} \parencite{EGAI,eisenbud}.

% Our approach to
% blending is the one adopted by Goguen in terms of colimits
% \parencite{Gog99,Goguen01,Gog05c}.

The terminology ``prime ideal'' relates to the older notion
of ``prime number''.  The initial aim of this work was to
look for a blend between integers (with prime numbers) and
the ideals of a commutative ring (without a notion of prime
ideal), to see what would emerge.  It turned out that
the blend process, along with providing a definition
for prime ideals, also suggested an unexpected concept
in the context of rings, namely the notion of Containment
Division Ring (CDR).  In turn, this prompted questions
and proofs about this concept --- thus running the blend
(space prevents description of this step below).

We present a first blend involving weakening, followed by a second
blend from fuller input spaces, where the emergent concept of CDR
appears.

% In this section, we will recover the concept of prime ideal of a
% commutative ring with unity as a sort of partial (or weakened) colimit
% (i.e.\ a colimit just taking into consideration some axioms of the
% input theories) between the concepts of an ideal of a commutative ring
% with unity (enriched with the collection of all the ideals of the
% corresponding ring) and the concept of a prime number of the integers.

% In fact, in order to obtain the desired space it is enough to consider
% a more general version of the prime numbers (in our case a partial
% version), namely, a monoid $(Z,*,1)$ with an ``special'' divisibility
% relation $\dannydiv$. Besides, the generic space would capture just
% the syntactic correspondences that we wish to identity in the blending
% space, since the blend would be basically the union of the collection
% of axioms given on each space, doing the corresponding
% identifications.

% Besides, by doing just slight modifications to the input conceptual
% spaces, i.e., by adding explicitly the upside-down divisibility
% condition to the second conceptual space we obtain as blend the space
% of prime ideals (and ideals) over a commutative ring satisfying
% additionally a new condition called the containment-division
% condition. We called this class of rings CDR (containment-division
% rings).

% Finally, we present the resulting axiomatization of an implementation
% done in HETS \parencite{Mossakowskihets}, which gives the conceptual space
% prime ideals (and ideals) over CDR-s as a blend.

% We present the conceptual spaces from the standard "pure" mathematical
% point of view doing concurrently the corresponding translation into
% the setting of the Common Algebraic Specification Language
% (CASL) \parencite{BidoitMosses2004}.
\subsection{The first conceptual space}
Let $(R,+.*,0,1)$ be a commutative ring with unity (see the formal
definition and examples in \cite{eisenbud}. Now, $R$ can be understood
as the sort containing the elements of the corresponding commutative
ring with unity.  An ideal $I$ is a subset of $R$ satisfying the
following axiom:
\[(\forall i,j\in I)(\forall r\in R)(i+(-j)\in I \wedge r*i\in I).\]

Let us define a unary relation (predicate) $isideal$
on the set (sort) of subsets of $P(R)$ corresponding to this definition.
% , as follows: $isideal(I)$
% if and only if $I$ is an ideal of $R$.
Now, we define
\[{\rm Id}(R)=\left\{A\subseteq R: isideal(A) \right\}.\]
% Here, ${\rm Spec}_IR$ is considered as a subsort of the sort $P(R)$.

Ideals are ``multiplied'' together using the following definition:
% There is one natural operation on ${\rm Id}(R)$, let us say
% $\cdot_{\iota}$, inherited in a natural way from the corresponding
% operations $+$ and $\cdot$ on $S$:
%
% Let $I,J\in {\rm Id}(R)$, then we define 
%
\[I\cdot_{\iota} J:=\left\{i_1\cdot j_1+...+i_n\cdot j_n:n \in \mathbb{N} \wedge i_k\in I \wedge j_k\in J \right\}.\]

% With this operation ${\rm Id}(R)$ forms a commutative monoid (i.e.\ we
% have commutativity, associativity and there exists a neutral element
% (in this case the ring)). However, this fact is irrelevant in our case
% for the blending process. As a matter of fact, 
The key property that
we want to keep in the blend is the one saying that this operation
has a neutral element $1_{\iota}$, which can be seen as an additional
notation for the ring, but with respect to this operation $\cdot_{\iota}$.
% instead of being the sort of elements of the ring, i.e., $R$.
%
On the other hand, we want to see the containment relation $\subseteq$
as a binary relation over the sort ${\rm Id}(R)$.

Summarizing, our first conceptual space consists of sorts $R,
\textrm{Id}(R)$ and $P(R)$; operations $+, *, 0_R, 1_R, 1_{\iota}$ and
$ \cdot_{\iota}$; and the relations $\subseteq$ and $isideal$.


% Here we add all the corresponding axioms defining $R$ as a commutative ring, the explicit former definition of $isideal$, ${\rm Id}(R)$ and $\cdot_{\iota}$; and the axiom guaranteeing that  $1_{\iota}$ is the neutral element for $\cdot_{\iota}$.

% It is important to note that although $R$ and $1_{\iota}$ are the same
% from the set-theoretical point of view, we choose two symbols in order
% to stress the particular function that the same set fulfils, i.e., as
% a collection of elements ($R$) or as a neutral element itself
% ($1_{\iota}$. Besides, it is more useful to do that for the purpose of
% an implementation (see Section \ref{implementation}). However, this
% distinction is irrelevant for our present pure-theoretical
% considerations.
 
Let us denote this space by $\mathbb{I}$.

\subsection{The second conceptual space}
Let $\mathbb{Z}$ be the set of the integer numbers. Here, we can
choose any axiomatization of them, since for the (partial) blend we
just take into account only the fact that $(\mathbb{Z},*,1)$ is a
commutative monoid.
% Or even simpler, we only use the fact that $1$ is
% the neutral element with the operation $*$. 
We define also an upside-
down divisibility relation $\dannydiv$ defined as
%
%\[e\dannydiv g:=g|e.\]
$e\dannydiv g:=g|e.$
(This makes the commonality more obvious notationally, though
it is not necessary for the blending machinery.)
% We re-write the classical divisibility relation
% on this way in order to obtain the right primality condition on the
%blend.  
Let us define a unary relation $isprime$ on $\mathbb{Z}$ as
follows: for all $p\in \mathbb{Z}$, $isprime(p)$ holds if $p\neq 1$
% and the following (primality) condition holds:
and:
%
\[(\forall a,b\in \mathbb{Z})(ab \dannydiv p)\rightarrow (a \dannydiv p \vee b \dannydiv p).\] 
Besides, we define the set (sort) of the prime numbers as 
\[ Prime=\left\{ p\in \mathbb{Z}/ isprime(p)\right\}\]
% Now, it is an
% elementary fact to see that this condition is an equivalent form of
% the standard definition of prime number given in the classical number
% theory books as the numbers $p$ with set of divisors
% $\left\{1,-1,p,-p\right\}$ (see for example
% \cite{Apostol76}). 
In the CASL language, we consider
$\mathbb{Z}$ as the sort of the integer numbers, $*$ as a binary
operation, $prime$ as a predicate and $\dannydiv$ as a binary
relation, any of them defined over the sort $\mathbb{Z}$.
We denote this conceptual space by $\mathbb{P}$.


\subsection{The Generic Space}

The generic space $\mathbb{G}$ consists of a set (sort) $G$ with a
binary operation $*_G$, a neutral element $S$ and a binary relation
$\leq_G$.

%  Let us denote this space by $\mathbb{G}$.

\subsection{The Blending Morphisms}

The morphism to $\mathbb{I}$  uses:\\
$\varphi(G)={\rm Id}(R),\varphi(*_G)=*_{\iota},
\varphi(S)=1_{\iota}$ and $\varphi(\leq_G)=\subseteq$;\\
the morphism to $\mathbb{G}$ uses:\\ $\delta(G)=\mathbb{Z}, \delta(*_G)=*,
\delta(S)=1$ and $\delta(\leq_G)= \dannydiv$.

% Now, let us define the morphisms from the generic space into the two
% corresponding conceptual spaces. Let $\varphi: \mathbb{G}\rightarrow
% \mathbb{I}$ be the morphism induced by the following syntactic
% correspondences $\varphi(G)={\rm Id}(R),\varphi(*_G)=*_{\iota},
% \varphi(S)=1_{\iota}$ and $\varphi(\leq_G)=\subseteq$.
% \newline\indent Furthermore, let
% $\delta:=\mathbb{G}\rightarrow\mathbb{P}$ be the morphism induced by
% the syntactic correspondences $\delta(G)=\mathbb{Z}, \delta(*_G)=*,
% \delta(S)=1$ and $\delta(\leq_G)= \dannydiv$.  

\subsection{The Axiomatization of the Blending}

A straightforward colimit construction based on the input and generic
spaces above yields a consistent space with properties inherited both
from the integers and from the ideals; one of the concepts is a notion
of prime applicable to ideals, another is that of CDR.

Here we describe briefly a weakening of the given spaces
that makes the resultant blend more generally applicable;
we subsequently look at the enrichment of the ideal space
with the notion of CDR.

% In the everyday research of the working mathematician it happens
% frequently that one starts to develop general theoretical frameworks
% by combining just some aspects of two particular theories but without
% considering the whole theories.
%
% For example, the development of
% differential geometry was obtained combining just some aspect of
% general and algebraic topology and some aspects of real analysis
% \cite{VelCad05}. The same happens with the methods use in
% analytic number theory which are a fusion of some components of
% elementary number theory and some of the real analysis techniques
% \cite{Apostol76}.
%
% Therefore, it is sometimes more natural in the daily mathematical research to
% obtain new concepts as ``partial'' combinations of two former ones,
% i.e., as combinations (blends) of just some axioms of the
% corresponding two theories.
 
% Thus, in our case, a partial blend will give us the desired
% concept. For example,
From the properties defining the integers we
transfer into the blend only the fact that $\mathbb{Z}$ is a set with
a binary operation $*$ having $1$ as neutral element and
$\dannydiv$ as a binary relation, without taking into account its formal definition.

% So, after using the same symbols for denoting the ring as a sort of
% elements or as the neutral element for the product of ideals
% $\cdot_G$, the blend has the form

% \[(S, +, *, 0_S, 1_S, G={\rm Id}(S), isprime,\]
% \[ Prime, \cdot_G, S=1_G, \subseteq)\] with all the corresponding
% axioms of the first conceptual space plus the translated version of
% the axiom defining the primality predicate after doing the
% corresponding symbolic identifications i.e., an element $P \in G$
Now after computing the colimit, we obtain that
any element $P \in G$
(i.e., an ideal of $S$) satisfies the predicate $isprime$ if and only
if
\begin{align*}
P\neq S \wedge (\forall X,Y\in G={\rm Id}(S)) & (X\cdot_{\alpha}Y\subseteq P\\
                             & \rightarrow (X\subseteq P \vee Y\subseteq P)).
\end{align*}

% Now, it is an elementary exercise to see that this definition is
% equivalent to the fact that $P$ is a prime ideal of $S$, i.e.\ to the
% condition
% %
% \[ P\neq S \wedge (\forall a,b\in S)(ab\in B\rightarrow (a\in P \vee
% b\in P)).\]
Thus, the predicate $isprime$ turns out to be the
predicate characterizing the primality of ideals of $S$ and the set
(sort) $Prime$ turns out to be the set of prime ideals of $S$.

% Besides, we just consider the fact that the upside-down divisibility
% relation is a binary relation without taking into account the formal
% definition into the blend.

Using the weakened input spaces, the blending space consists of the
axioms assuring that $S$ is a commutative ring with unity, $G$ is the
set of ideals of $S$, $isprime$ is the predicate specifying primality
for ideals of $S$ and $Prime$ is the collection of all prime ideals of
$S$.


\subsection{Implementation for prime ideals over CDR-s as a blend}\label{implementation}

% It is a well-known fact that the principal ideal domains, or even the
% Dedekind domains are CDR-s (see for example \cite[Fundamental Theorem
% of AOK-s]{weissalgebraicnumber}).

% On the other hand, if $R$ is not a Dedekind domain, but for example a
% unique factorization domain (UFD), then $R$ is not, in general, a
% CDR. For example, when $R=\mathbb{Z}[T]$, one can check that the
% ideals $X=(2)$ and $Y=(2,T)$ gives a counterexample.

% This suggests that in the setting of commutative rings with unity the
% class of CDR-s could be an intermediate new class of rings.

% In this section we reconstruct the conceptual space of prime ideals of
In this section we construct the conceptual space of prime ideals of
a CDR as a blend of the conceptual space of ideals
of a commutative ring with unity and the conceptual space of prime
elements of a very general version of the integers given exactly as
the second conceptual space of the former section.

It is worth mentioning again that the definition of CDR-s was obtained after
doing this implementation and therefore it could be seen as a form of
``creative'' result coming from the blending process.

% Here, it is important to point out that in this implementation we
% looked for a minimal set of axioms such that, at the same time, the
% semantic interpretation can be uniquely determined. It is always
% possible to construct an implementation with additional axioms given
% by properties that could be logically derived from the main axioms,
% (e.g. the set theoretical properties of the containment relation for
% subsets of a set) but these properties are secondary ones, meanwhile,
% the ones defining the arithmetic of the ring, of an ideal and of the
% set of ideals of the ring are the essential ones.

After computing the corresponding colimit in HETS and interpreting
"RingElt" as the sort containing the elements of the ring $S$, the
theory defining the blend corresponds to the axioms defining a CDR
(S), the set of all its ideals (Generic), the set all its prime ideals
(SimplePrime) and a primality predicate (IsPrime).  We present 
in Listing~\ref{listing:prime_colim}
just the theory corresponding to the colimit, in order to see the
complete implementation see \textbf{add pointer!!!}.

% \begin{figure}[ht!]
% 
  \begin{listing}[!ht]
    \begin{mdframed}
     \begin{footnotesize}
      \input{ideal_colim.pp}
    \end{footnotesize}
  \end{mdframed}
    \caption{Colimit for prime ideals over CDR-s}
    \label{listing:prime_colim}
  \end{listing}
%\end{footnotesize}
%  \caption{Colimit Theory}
%  \label{fig:ideal_colim}
% \end{figure}
% \begin{verbatim}
% logic CASL.SulFOL=

% sorts Generic, RingElt, SimplePrime, SubSetOfRing
% sorts SimplePrime < Generic; Generic < SubSetOfRing
% op 0 : RingElt
% op 1 : RingElt
% op S : Generic
% op __*__ : RingElt * RingElt -> RingElt
% op __+__ : RingElt * RingElt -> RingElt
% op __x__ : Generic * Generic -> Generic
% pred IsIdeal : SubSetOfRing
% pred IsPrime : Generic
% pred __isIn__ : RingElt * SubSetOfRing
% pred gcont : Generic * Generic

% forall I : SubSetOfRing . I in Generic <=> IsIdeal(I)
% forall x : Generic . x x S = x 
% forall x : Generic . S x x = x 
% forall A, B : Generic.
% gcont(A, B) <=> forall a : RingElt . a isIn A => a isIn B
% forall x, y : RingElt . x + y = y + x 
% forall x, y, z : RingElt . (x + y) + z = x + (y + z)
% forall x : RingElt . x + 0 = x /\ 0 + x = x 
% forall x : RingElt . exists x' : RingElt . x' + x = 0
% forall x, y : RingElt . x * y = y * x 
% forall x, y, z : RingElt . (x * y) * z = x * (y * z)
% forall x : RingElt . x * 1 = x /\ 1 * x = x 
% forall x, y, z : RingElt
% . (x + y) * z = (x * z) + (y * z) 
% forall x, y, z : RingElt 
% . z * (x + y) = (z * x) + (z * y) 
% forall I : SubSetOfRing
% . IsIdeal(I)
%  <=> forall a, b, c : RingElt
% . ((a isIn I => a isIn S) /\ 0 isIn I)
% /\ (a isIn I /\ c isIn S => c * a isIn I)
% /\ (a isIn I /\ b isIn I /\ 
% c isIn S /\ b + c = 0 => a + c isIn I)                                              
% forall a : RingElt; A : Generic
% . a generates A
% <=> forall c : RingElt 
% . c isIn A => exists d : RingElt . c = a * d                                                  
% forall A, B : Generic; a, b : RingElt
% . a isIn A /\ b isIn B => a * b isIn A x B        
% forall A, B, D : Generic
% . (forall a, b : RingElt
% . a isIn A /\ b isIn B => a * b isIn D)
% => gcont(A x B, D)                             
% forall x, y : Generic
% . gcont(x, y) <=> exists c : Generic . x = y x c 
% forall p : Generic . p in SimplePrime <=> IsPrime(p)
% forall p : Generic
% . IsPrime(p)
% <=> (forall a, b : Generic
% . gcont(a x b, p) => gcont(a, p) \/ gcont(b, p))
% /\ not p = S                             

% \end{verbatim}


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "mathsICCC"
%%% End: 

